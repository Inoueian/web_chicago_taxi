{% extends "base.html" %}

{% block title %}Analysis for the Chicago taxi project{% endblock %}

{% block page_content %}
<div class="container">
    <div class="page-header">
	<h1>Analysis for the Chicago taxi project</h1>
    </div>
    <h2>Data ingestion</h2>
    <p>I first downloaded the <a href="https://data.cityofchicago.org/Transportation/Taxi-Trips/wrvz-psew">Chicago taxi dataset</a>, and studied small subsets using Pandas for preliminary analysis. While there were some incomplete rows that could not be used for my analysis, most of the 113M rows (each representing a taxi ride in Chicago) in the dataset contained the start and end times and locations, as well as the fare. The time period covered by this data set is form 2013-01-01 to 2017-08-01.</p>
    <p>Weather data was obtained fro <a href="https://www.ncdc.noaa.gov/cdo-web/">NOAA</a>. I searched for weather stations with mostly complete daily temperature and precipitation information in the 2013-17 period, located as close as possible to the Loop. Most of the temperature data comes from 'CHICAGO NORTHERLY ISLAND' weather station, and the precipitation data comes from 'CHICAGO 5.5 ESE' weather station. Missing values were filled using data from 'CHICAGO MIDWAY AIRPORT' station. These data sets are small enough that they could be analyzed fully in Pandas.</p>
    <h2>Distributed computing</h2>
    <p>I used a Google Cloud Hadoop cluster to count the taxi rides involving the Loop within each time 15-minute interval, grouped by which census tract that the taxi rides started/ended in. I also calculated the average fares between the Loop and each census tract using Hadoop. There were misentered fares in the data set (e.g. fares above $1000), and these were removed from the calculation of the averages by automatically removing values that are significantly far from the average.</p>
    <h2>Machine learning</h2>
    <p>I built machine learning models to predict the amounts of taxi traffic enterimng and leaving the Loop. The first model simply used the time of day and day of the week as features, and was a linear regression model. As expected, taxi traffic is higher on weekdays than on weekends, and there are peaks corresponding to morning rush, lunch break, and evening rush. I made a small improvement on the time-only model by considering holidays as an additional feature (whether a day is a US federal holiday or not). Again as expected, holidays resemble weekends in their traffic patterns.</p>
    <p>Next, temperature (daily high temperature) and precipitation (daily precipitation amount and daily snow amount) were added as features for the prediction of taxi traffic. Interestingly, precipitation added very little information to the prediction. Temperature, on the other hand, affected the time of the day that people tended to use taxis. For example, more taxi rides occurred later in the night when the temperature was higher. This is not as obvious as the patterns found in the time-only analysis, but it is expected from common sense. Since representing this interaction between temperature and time of day requires nonlinearity, I used a simple neural network (1 hidden layer with 5 neurons) for the final predictive model.</p>
    <h2>Traffic reduction model and visualization</h2>
    <p>The predictive model gives me the "typical" amount of taxi traffic at each possible time of the day, day of the week, and weather condition. This amount is the starting point for the traffic reduction analysis, where the congestion fee is $0. For the purpose of demonstration, 9am on Wednesday at average temperature gives the peak traffic "to the Loop," and 6pm on Wednesday at average temperature gives the peak traffic "from the Loop." These were the times with the highest amount of traffic according to the predictive model.</p>
    <p>The traffic reduction model assumes that all taxi rides between the Loop and a given census tract cost the average amount for such rides. This is a reasonable assumption, as for most census tracts, the standard deviation in the fare to/from the Loop is 10-20% of the total fare. With this assumption and a value for the price elasticity, I can calculate how much a given congestion fee would reduce the taxi traffic amount. Price elasticity is defined here as the ratio (% reduction in demand) / (% reduction in total cost).</p>
    <p>2 visualizations of the traffic reduction were made using the Bokeh package, as shown on the <a href="/">home page</a>. First, a line graph shows the reduction in traffic for fees from $0 to 5, at various values for the price elasticity (chosen by the user). In order to give a sense of the general sense for which crossings may be the most congested, the traffic amount is categorized by the direction that the taxi entered or left the Loop. Taxi rides staying inside the Loop are not affected by the fee, but other rides are reduced by the fee.</p>
    <p>The second visualization is a map to show which census tracts are served by taxi rides to and from the Loop, and how the traffic amount to each tract is affected by the fee. For this plot, the price elasticity is assumed to be 0.5. The map is color coded so that high traffic areas are shown in red and low traffic areas are shown in blue. Using a hover tool, the user can see the estimated hourly taxi traffic to and from each census tract.</p>

</div>
{% endblock %}
