  (function() {
    var fn = function() {
      Bokeh.safely(function() {
        (function(root) {
          function embed_document(root) {
            
          var docs_json = '{"d67cd5b0-2f59-46ec-9d20-7fd6f9e2e76b":{"roots":{"references":[{"attributes":{"axis_label":"proportion of taxi rides","formatter":{"id":"40cee6e2-eab8-4c15-a91f-f60b69c997fc","type":"BasicTickFormatter"},"plot":{"id":"0334e450-700a-4dd6-bbb5-9a001daf2ffd","subtype":"Figure","type":"Plot"},"ticker":{"id":"53cd7fea-03f0-4e4f-8fab-547aa2c5167a","type":"BasicTicker"}},"id":"67eb62bf-fba9-404d-aee2-f8de1b86881d","type":"LinearAxis"},{"attributes":{"callback":null,"tooltips":[["(x,y)","($x, $y)"]]},"id":"219a62d0-a9bc-4bd3-8625-a2194681ec3b","type":"HoverTool"},{"attributes":{},"id":"53cd7fea-03f0-4e4f-8fab-547aa2c5167a","type":"BasicTicker"},{"attributes":{"data_source":{"id":"99c94a98-282e-44e7-9522-79a688b60327","type":"ColumnDataSource"},"glyph":{"id":"00aa4c72-1556-4801-a88a-850176f5d22b","type":"Line"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"2c4441b2-ce52-440c-953c-9a3a95a1b50a","type":"Line"},"selection_glyph":null,"view":{"id":"a62f8200-7e01-47c5-828b-d9cfc6dcea4c","type":"CDSView"}},"id":"696a77d2-c38f-40fa-bbfb-b3026389c8d8","type":"GlyphRenderer"},{"attributes":{"source":{"id":"99c94a98-282e-44e7-9522-79a688b60327","type":"ColumnDataSource"}},"id":"a14024d4-0bce-4712-9c83-96acde3da542","type":"CDSView"},{"attributes":{"dimension":1,"plot":{"id":"0334e450-700a-4dd6-bbb5-9a001daf2ffd","subtype":"Figure","type":"Plot"},"ticker":{"id":"53cd7fea-03f0-4e4f-8fab-547aa2c5167a","type":"BasicTicker"}},"id":"5f73a6b6-ab43-41e9-9949-7dd1c2259c6d","type":"Grid"},{"attributes":{"label":{"value":"North"},"renderers":[{"id":"696a77d2-c38f-40fa-bbfb-b3026389c8d8","type":"GlyphRenderer"}]},"id":"947f9db4-20f1-4f8d-9348-906691383bb4","type":"LegendItem"},{"attributes":{"line_color":"#99d594","line_width":2,"x":{"field":"x"},"y":{"field":"N"}},"id":"00aa4c72-1556-4801-a88a-850176f5d22b","type":"Line"},{"attributes":{"source":{"id":"99c94a98-282e-44e7-9522-79a688b60327","type":"ColumnDataSource"}},"id":"0165e3d1-5ddf-4984-a3ec-a50a7109bad2","type":"CDSView"},{"attributes":{"data_source":{"id":"99c94a98-282e-44e7-9522-79a688b60327","type":"ColumnDataSource"},"glyph":{"id":"b2951beb-692c-4a13-9d23-8cf04ebd9187","type":"Line"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"eb25bfbc-da7f-4463-806d-b64ddff2648f","type":"Line"},"selection_glyph":null,"view":{"id":"fbea849c-7820-4609-ab4a-66560b236427","type":"CDSView"}},"id":"f8793ec0-aec8-44a5-800f-7f0a8f59c2e2","type":"GlyphRenderer"},{"attributes":{"data_source":{"id":"99c94a98-282e-44e7-9522-79a688b60327","type":"ColumnDataSource"},"glyph":{"id":"f54a4dd8-4218-4645-86c2-c5d318eaf358","type":"Line"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"46d264e8-4059-4709-b59c-164aecf26671","type":"Line"},"selection_glyph":null,"view":{"id":"0165e3d1-5ddf-4984-a3ec-a50a7109bad2","type":"CDSView"}},"id":"947473bf-829d-4f50-8929-9b6b1607de00","type":"GlyphRenderer"},{"attributes":{"line_alpha":0.1,"line_color":"#1f77b4","line_width":2,"x":{"field":"x"},"y":{"field":"total"}},"id":"46d264e8-4059-4709-b59c-164aecf26671","type":"Line"},{"attributes":{"source":{"id":"99c94a98-282e-44e7-9522-79a688b60327","type":"ColumnDataSource"}},"id":"9d6d1c10-123c-4413-8366-01253ffcfabf","type":"CDSView"},{"attributes":{"source":{"id":"99c94a98-282e-44e7-9522-79a688b60327","type":"ColumnDataSource"}},"id":"fbea849c-7820-4609-ab4a-66560b236427","type":"CDSView"},{"attributes":{"line_color":"#e6f598","line_width":2,"x":{"field":"x"},"y":{"field":"W"}},"id":"b2951beb-692c-4a13-9d23-8cf04ebd9187","type":"Line"},{"attributes":{"source":{"id":"99c94a98-282e-44e7-9522-79a688b60327","type":"ColumnDataSource"}},"id":"a62f8200-7e01-47c5-828b-d9cfc6dcea4c","type":"CDSView"},{"attributes":{"label":{"value":"West"},"renderers":[{"id":"f8793ec0-aec8-44a5-800f-7f0a8f59c2e2","type":"GlyphRenderer"}]},"id":"801319f2-8019-430e-9c19-12a1e47d024e","type":"LegendItem"},{"attributes":{"line_alpha":0.1,"line_color":"#1f77b4","line_width":2,"x":{"field":"x"},"y":{"field":"W"}},"id":"eb25bfbc-da7f-4463-806d-b64ddff2648f","type":"Line"},{"attributes":{"data_source":{"id":"99c94a98-282e-44e7-9522-79a688b60327","type":"ColumnDataSource"},"glyph":{"id":"1b2f026d-4556-4b04-9b0b-463052786a4d","type":"Line"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"d24958fb-c298-494a-9cc4-d58dcd5eb039","type":"Line"},"selection_glyph":null,"view":{"id":"a14024d4-0bce-4712-9c83-96acde3da542","type":"CDSView"}},"id":"264e533c-5fca-40ac-ba76-18f2c521e5c1","type":"GlyphRenderer"},{"attributes":{"label":{"value":"South"},"renderers":[{"id":"264e533c-5fca-40ac-ba76-18f2c521e5c1","type":"GlyphRenderer"}]},"id":"a2eb43a6-d4fc-4d77-9f38-f846f91cd723","type":"LegendItem"},{"attributes":{"items":[{"id":"8d535c65-3dd3-49b1-a9a1-419d96848ed3","type":"LegendItem"},{"id":"947f9db4-20f1-4f8d-9348-906691383bb4","type":"LegendItem"},{"id":"801319f2-8019-430e-9c19-12a1e47d024e","type":"LegendItem"},{"id":"a2eb43a6-d4fc-4d77-9f38-f846f91cd723","type":"LegendItem"},{"id":"588b8e4c-4aec-46a4-b818-1ad358bc3290","type":"LegendItem"}],"plot":{"id":"0334e450-700a-4dd6-bbb5-9a001daf2ffd","subtype":"Figure","type":"Plot"}},"id":"7c3624c3-41d2-4fab-a28d-239a82065c3a","type":"Legend"},{"attributes":{},"id":"26ad9f8e-7425-4979-b0a5-9e4e124df5e7","type":"BasicTickFormatter"},{"attributes":{},"id":"0af5b99b-7339-4885-af25-389262c4a8ce","type":"BasicTicker"},{"attributes":{},"id":"40cee6e2-eab8-4c15-a91f-f60b69c997fc","type":"BasicTickFormatter"},{"attributes":{"plot":null,"text":"Taxi traffic reduction by region"},"id":"784743ce-6484-49b3-b08f-bc3b4af4129a","type":"Title"},{"attributes":{"callback":null},"id":"35a694c3-e6e6-4a0e-ad6c-aa9ef97842a7","type":"Range1d"},{"attributes":{"args":{"avg_source":{"id":"4dbefd45-27c6-465f-9257-fdc394796eb5","type":"ColumnDataSource"},"dir_select":{"id":"55f9740e-00ad-4d67-82b0-e0fce9ddb564","type":"Select"},"source":{"id":"99c94a98-282e-44e7-9522-79a688b60327","type":"ColumnDataSource"}},"code":"\\n    var data = source.data\\n    var avg_data = avg_source.data\\n    var dir = dir_select.value\\n    var elas = cb_obj.value\\n    \\n    regions = avg_data[&#x27;region&#x27;]\\n    avgs = avg_data[&#x27;avg&#x27;]\\n    if (dir == &#x27;from the Loop&#x27;) {\\n        var ratios = avg_data[&#x27;ratio_from&#x27;]\\n    } else {\\n        var ratios = avg_data[&#x27;ratio_to&#x27;]\\n    }\\n    sum = ratios.reduce((a, b) =&gt; a + b, 0)\\n    \\n    x = data[&#x27;x&#x27;]\\n    total = data[&#x27;total&#x27;]\\n    N = data[&#x27;N&#x27;]\\n    W = data[&#x27;W&#x27;]\\n    S = data[&#x27;S&#x27;]\\n    L = data[&#x27;L&#x27;]\\n    \\n    for (i = 0; i &lt; x.length; i++) {\\n        N[i] = 0\\n        W[i] = 0\\n        S[i] = 0\\n        L[i] = 0\\n        for (j = 0; j &lt; regions.length; j++) {\\n            if (regions[j] == &#x27;N&#x27;) {\\n                N[i] += ratios[j] * (1 - elas * x[i] / avgs[j])\\n            } else if (regions[j] == &#x27;W&#x27;) {\\n                W[i] += ratios[j] * (1 - elas * x[i] / avgs[j])\\n            } else if (regions[j] == &#x27;S&#x27;) {\\n                S[i] += ratios[j] * (1 - elas * x[i] / avgs[j])\\n            } else {\\n                L[i] += ratios[j]\\n            }\\n        }\\n        N[i] = N[i] / sum\\n        W[i] = W[i] / sum\\n        S[i] = S[i] / sum\\n        L[i] = L[i] / sum\\n        total[i] = N[i] + W[i] + S[i] + L[i]\\n    }\\n    source.change.emit()\\n"},"id":"06ace210-1041-45cb-9ab3-79841663b988","type":"CustomJS"},{"attributes":{"line_color":"#fee08b","line_width":2,"x":{"field":"x"},"y":{"field":"S"}},"id":"1b2f026d-4556-4b04-9b0b-463052786a4d","type":"Line"},{"attributes":{},"id":"62a7dff4-0ad5-4e75-8943-37f6a0dc5bef","type":"LinearScale"},{"attributes":{"data_source":{"id":"99c94a98-282e-44e7-9522-79a688b60327","type":"ColumnDataSource"},"glyph":{"id":"78000991-c896-4077-9922-115b07ad7a28","type":"Line"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1d3f3022-619f-4772-834f-08363e3ec6af","type":"Line"},"selection_glyph":null,"view":{"id":"9d6d1c10-123c-4413-8366-01253ffcfabf","type":"CDSView"}},"id":"b477fdf9-3fde-4bdb-92db-271fd63436a5","type":"GlyphRenderer"},{"attributes":{"active_drag":"auto","active_inspect":"auto","active_scroll":"auto","active_tap":"auto","tools":[{"id":"3009313b-64c4-4c7c-8788-08f1a671fdd2","type":"PanTool"},{"id":"96dbfd75-3dbb-44a4-bff6-40037d18dde7","type":"BoxZoomTool"},{"id":"ab3fb780-206a-419b-ac3f-b126d6d6a690","type":"WheelZoomTool"},{"id":"ec0d261f-275e-49cb-a6c7-0a2a48238aeb","type":"ResetTool"},{"id":"70b37095-1727-40f4-9834-8041f2220479","type":"SaveTool"},{"id":"219a62d0-a9bc-4bd3-8625-a2194681ec3b","type":"HoverTool"}]},"id":"cbdd2396-e6d8-4c73-81c4-b26b9dc8be26","type":"Toolbar"},{"attributes":{},"id":"ab3fb780-206a-419b-ac3f-b126d6d6a690","type":"WheelZoomTool"},{"attributes":{"children":[{"id":"a1135b86-781d-4bf9-af2a-5040361b8451","type":"WidgetBox"},{"id":"0334e450-700a-4dd6-bbb5-9a001daf2ffd","subtype":"Figure","type":"Plot"}]},"id":"a580f36f-89a9-4cdc-a3ac-78f3fd2d01f4","type":"Row"},{"attributes":{},"id":"70b37095-1727-40f4-9834-8041f2220479","type":"SaveTool"},{"attributes":{"line_color":"#3288bd","line_width":2,"x":{"field":"x"},"y":{"field":"total"}},"id":"f54a4dd8-4218-4645-86c2-c5d318eaf358","type":"Line"},{"attributes":{},"id":"ec0d261f-275e-49cb-a6c7-0a2a48238aeb","type":"ResetTool"},{"attributes":{"line_color":"#fc8d59","line_width":2,"x":{"field":"x"},"y":{"field":"L"}},"id":"78000991-c896-4077-9922-115b07ad7a28","type":"Line"},{"attributes":{},"id":"445a86c8-e8b6-44c8-a803-ef654f88f0b3","type":"LinearScale"},{"attributes":{"line_alpha":0.1,"line_color":"#1f77b4","line_width":2,"x":{"field":"x"},"y":{"field":"S"}},"id":"d24958fb-c298-494a-9cc4-d58dcd5eb039","type":"Line"},{"attributes":{"below":[{"id":"6d844947-2e1d-41f1-af50-0e8857205d6e","type":"LinearAxis"}],"left":[{"id":"67eb62bf-fba9-404d-aee2-f8de1b86881d","type":"LinearAxis"}],"renderers":[{"id":"6d844947-2e1d-41f1-af50-0e8857205d6e","type":"LinearAxis"},{"id":"192c1604-69f5-4514-8116-aa64870e03ea","type":"Grid"},{"id":"67eb62bf-fba9-404d-aee2-f8de1b86881d","type":"LinearAxis"},{"id":"5f73a6b6-ab43-41e9-9949-7dd1c2259c6d","type":"Grid"},{"id":"80375034-3eae-4a81-932c-9fd68ba8c69d","type":"BoxAnnotation"},{"id":"7c3624c3-41d2-4fab-a28d-239a82065c3a","type":"Legend"},{"id":"947473bf-829d-4f50-8929-9b6b1607de00","type":"GlyphRenderer"},{"id":"696a77d2-c38f-40fa-bbfb-b3026389c8d8","type":"GlyphRenderer"},{"id":"f8793ec0-aec8-44a5-800f-7f0a8f59c2e2","type":"GlyphRenderer"},{"id":"264e533c-5fca-40ac-ba76-18f2c521e5c1","type":"GlyphRenderer"},{"id":"b477fdf9-3fde-4bdb-92db-271fd63436a5","type":"GlyphRenderer"}],"title":{"id":"784743ce-6484-49b3-b08f-bc3b4af4129a","type":"Title"},"toolbar":{"id":"cbdd2396-e6d8-4c73-81c4-b26b9dc8be26","type":"Toolbar"},"x_range":{"id":"3f073f51-5725-41f4-8dc0-c2b6513cdc86","type":"Range1d"},"x_scale":{"id":"445a86c8-e8b6-44c8-a803-ef654f88f0b3","type":"LinearScale"},"y_range":{"id":"35a694c3-e6e6-4a0e-ad6c-aa9ef97842a7","type":"Range1d"},"y_scale":{"id":"62a7dff4-0ad5-4e75-8943-37f6a0dc5bef","type":"LinearScale"}},"id":"0334e450-700a-4dd6-bbb5-9a001daf2ffd","subtype":"Figure","type":"Plot"},{"attributes":{"label":{"value":"Loop"},"renderers":[{"id":"b477fdf9-3fde-4bdb-92db-271fd63436a5","type":"GlyphRenderer"}]},"id":"588b8e4c-4aec-46a4-b818-1ad358bc3290","type":"LegendItem"},{"attributes":{"axis_label":"fee (dollars)","formatter":{"id":"26ad9f8e-7425-4979-b0a5-9e4e124df5e7","type":"BasicTickFormatter"},"plot":{"id":"0334e450-700a-4dd6-bbb5-9a001daf2ffd","subtype":"Figure","type":"Plot"},"ticker":{"id":"0af5b99b-7339-4885-af25-389262c4a8ce","type":"BasicTicker"}},"id":"6d844947-2e1d-41f1-af50-0e8857205d6e","type":"LinearAxis"},{"attributes":{"plot":{"id":"0334e450-700a-4dd6-bbb5-9a001daf2ffd","subtype":"Figure","type":"Plot"},"ticker":{"id":"0af5b99b-7339-4885-af25-389262c4a8ce","type":"BasicTicker"}},"id":"192c1604-69f5-4514-8116-aa64870e03ea","type":"Grid"},{"attributes":{"line_alpha":0.1,"line_color":"#1f77b4","line_width":2,"x":{"field":"x"},"y":{"field":"L"}},"id":"1d3f3022-619f-4772-834f-08363e3ec6af","type":"Line"},{"attributes":{"overlay":{"id":"80375034-3eae-4a81-932c-9fd68ba8c69d","type":"BoxAnnotation"}},"id":"96dbfd75-3dbb-44a4-bff6-40037d18dde7","type":"BoxZoomTool"},{"attributes":{"callback":null,"js_property_callbacks":{"change:value":[{"id":"7cbeefbb-600f-40f5-a87d-9807bfebe17c","type":"CustomJS"}]},"options":["from the Loop","to the Loop"],"title":"direction","value":"from the Loop"},"id":"55f9740e-00ad-4d67-82b0-e0fce9ddb564","type":"Select"},{"attributes":{"callback":null,"column_names":["x","total","N","W","L","S","index"],"data":{"L":{"__ndarray__":"jDLxKOFe0T+MMvEo4V7RP4wy8SjhXtE/jDLxKOFe0T+MMvEo4V7RP4wy8SjhXtE/jDLxKOFe0T+MMvEo4V7RP4wy8SjhXtE/jDLxKOFe0T+MMvEo4V7RP4wy8SjhXtE/jDLxKOFe0T+MMvEo4V7RP4wy8SjhXtE/jDLxKOFe0T+MMvEo4V7RP4wy8SjhXtE/jDLxKOFe0T+MMvEo4V7RP4wy8SjhXtE/jDLxKOFe0T+MMvEo4V7RP4wy8SjhXtE/jDLxKOFe0T+MMvEo4V7RP4wy8SjhXtE/jDLxKOFe0T+MMvEo4V7RP4wy8SjhXtE/jDLxKOFe0T+MMvEo4V7RP4wy8SjhXtE/jDLxKOFe0T+MMvEo4V7RP4wy8SjhXtE/jDLxKOFe0T+MMvEo4V7RP4wy8SjhXtE/jDLxKOFe0T+MMvEo4V7RP4wy8SjhXtE/jDLxKOFe0T+MMvEo4V7RP4wy8SjhXtE/jDLxKOFe0T+MMvEo4V7RP4wy8SjhXtE/jDLxKOFe0T+MMvEo4V7RP4wy8SjhXtE/","dtype":"float64","shape":[51]},"N":{"__ndarray__":"/T8qYVDc2D+7bGFHv67YP3qZmC0ugdg/OMbPE51T2D/18gb6CybYP7QfPuB6+Nc/ckx1xunK1z8xeaysWJ3XP++l45LHb9c/rdIaeTZC1z9q/1FfpRTXPyksiUUU59Y/5ljAK4O51j+lhfcR8ovWP2SyLvhgXtY/Id9l3s8w1j/fC53EPgPWP5041Kqt1dU/XGULkRyo1T8ZkkJ3i3rVP9i+eV36TNU/leuwQ2kf1T9UGOgp2PHUPxNFHxBHxNQ/0HFW9rWW1D+Ono3cJGnUP0zLxMKTO9Q/Cvj7qAIO1D/JJDOPceDTP4dRanXgstM/RH6hW0+F0z8Dq9hBvlfTP8HXDygtKtM/fwRHDpz80j89MX70Cs/SP/tdtdp5odI/uYrswOhz0j94tyOnV0bSPzbkWo3GGNI/8xCSczXr0T+xPclZpL3RP29qAEATkNE/LZc3JoJi0T/sw24M8TTRP6rwpfJfB9E/aB3d2M7Z0D8mShS/PazQP+R2S6WsftA/oqOCixtR0D9g0LlxiiPQPz764a/y688/","dtype":"float64","shape":[51]},"S":{"__ndarray__":"dy/baCn0rz9gDIYb6syvP0jpMM6qpa8/NMbbgGt+rz8do4YzLFevPwaAMebsL68/7lzcmK0Irz/XOYdLbuGuP8EWMv4uuq4/qvPcsO+Srj+T0IdjsGuuP3ytMhZxRK4/ZordyDEdrj9OZ4h78vWtPzhEMy6zzq0/ICHe4HOnrT8K/oiTNICtP/PaM0b1WK0/3Lfe+LUxrT/FlImrdgqtP65xNF4346w/l07fEPi7rD+AK4rDuJSsP2kINXZ5baw/UuXfKDpGrD88worb+h6sPyWfNY6796s/DnzgQHzQqz/4WIvzPKmrP+E1Nqb9gas/yhLhWL5aqz+y74sLfzOrP5zMNr4/DKs/hanhcADlqj9vhowjwb2qP1djN9aBlqo/QUDiiEJvqj8qHY07A0iqPxP6N+7DIKo//NbioIT5qT/ms41TRdKpP86QOAYGq6k/uG3juMaDqT+hSo5rh1ypP4onOR5INak/cwTk0AgOqT9d4Y6DyeaoP0W+OTaKv6g/Lpvk6EqYqD8YeI+bC3GoPwBVOk7MSag/","dtype":"float64","shape":[51]},"W":{"__ndarray__":"eVY3YDEgyT/mcheWjfjIP1KP98vp0Mg/vKvXAUapyD8nyLc3ooHIP5Tkl23+Wcg//gB4o1oyyD9qHVjZtgrIP9Y5OA8T48c/QFYYRW+7xz+scvh6y5PHPxmP2LAnbMc/g6u45oNExz/ux5gc4BzHP1rkeFI89cY/xgBZiJjNxj8wHTm+9KXGP5s5GfRQfsY/B1b5Ka1Wxj9yctlfCS/GP96OuZVlB8Y/SquZy8HfxT+0x3kBHrjFPyDkWTd6kMU/jAA6bdZoxT/3HBqjMkHFP2M5+tiOGcU/zlXaDuvxxD85crpER8rEP6WOmnqjosQ/EKt6sP96xD97x1rmW1PEP+bjOhy4K8Q/UgAbUhQExD++HPuHcNzDPyg5273MtMM/lFW78yiNwz8AcpsphWXDP2uOe1/hPcM/1qpblT0Wwz9CxzvLme7CP6zjGwH2xsI/GAD8NlKfwj+EHNxsrnfCP+84vKIKUMI/WlWc2GYowj/GcXwOwwDCPzKOXEQf2cE/nKo8enuxwT8Ixxyw14nBP3Tj/OUzYsE/","dtype":"float64","shape":[51]},"index":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"total":{"__ndarray__":"AAAAAAAA8D96GDnovNnvP/QwctB5s+8/bEmruDaN7z/lYeSg82bvP196HYmwQO8/2JJWcW0a7z9Sq49ZKvTuP8zDyEHnze4/RNwBKqSn7j+99DoSYYHuPzgNdPodW+4/sCWt4to07j8qPubKlw7uP6NWH7NU6O0/HG9YmxHC7T+Wh5GDzpvtPw6gymuLde0/ibgDVEhP7T8A0Tw8BSntP3vpdSTCAu0/8wGvDH/c7D9tGuj0O7bsP+gyId34j+w/X0taxbVp7D/ZY5OtckPsP1J8zJUvHew/y5QFfuz26z9FrT5mqdDrP77Fd05mqus/N96wNiOE6z+w9uke4F3rPyoPIwedN+s/oydc71kR6z8cQJXXFuvqP5VYzr/TxOo/D3EHqJCe6j+JiUCQTXjqPwKieXgKUuo/erqyYMcr6j/z0utIhAXqP2zrJDFB3+k/5gNeGf646T9gHJcBu5LpP9o00Ol3bOk/UU0J0jRG6T/LZUK68R/pP0R+e6Ku+eg/vpa0imvT6D84r+1yKK3oP7DHJlvlhug/","dtype":"float64","shape":[51]},"x":{"__ndarray__":"AAAAAAAAAACamZmZmZm5P5qZmZmZmck/NDMzMzMz0z+amZmZmZnZPwAAAAAAAOA/NDMzMzMz4z9nZmZmZmbmP5qZmZmZmek/zczMzMzM7D8AAAAAAADwP5qZmZmZmfE/NDMzMzMz8z/NzMzMzMz0P2dmZmZmZvY/AAAAAAAA+D+amZmZmZn5PzQzMzMzM/s/zczMzMzM/D9nZmZmZmb+PwAAAAAAAABAzczMzMzMAECamZmZmZkBQGdmZmZmZgJANDMzMzMzA0AAAAAAAAAEQM3MzMzMzARAmpmZmZmZBUBnZmZmZmYGQDQzMzMzMwdAAAAAAAAACEDNzMzMzMwIQJqZmZmZmQlAZ2ZmZmZmCkA0MzMzMzMLQAAAAAAAAAxAzczMzMzMDECamZmZmZkNQGdmZmZmZg5ANDMzMzMzD0AAAAAAAAAQQGdmZmZmZhBAzczMzMzMEEAzMzMzMzMRQJqZmZmZmRFAAAAAAAAAEkBnZmZmZmYSQM3MzMzMzBJANDMzMzMzE0CamZmZmZkTQAAAAAAAABRA","dtype":"float64","shape":[51]}}},"id":"99c94a98-282e-44e7-9522-79a688b60327","type":"ColumnDataSource"},{"attributes":{"bottom_units":"screen","fill_alpha":{"value":0.5},"fill_color":{"value":"lightgrey"},"left_units":"screen","level":"overlay","line_alpha":{"value":1.0},"line_color":{"value":"black"},"line_dash":[4,4],"line_width":{"value":2},"plot":null,"render_mode":"css","right_units":"screen","top_units":"screen"},"id":"80375034-3eae-4a81-932c-9fd68ba8c69d","type":"BoxAnnotation"},{"attributes":{"args":{"avg_source":{"id":"4dbefd45-27c6-465f-9257-fdc394796eb5","type":"ColumnDataSource"},"elas_select":{"id":"d4dd3cda-7cc4-4e42-b201-f79bdc43193f","type":"Slider"},"source":{"id":"99c94a98-282e-44e7-9522-79a688b60327","type":"ColumnDataSource"}},"code":"\\n    var data = source.data\\n    var dir = cb_obj.value\\n    var elas = elas_select.value\\n    var avg_data = avg_source.data\\n\\n    regions = avg_data[&#x27;region&#x27;]\\n    avgs = avg_data[&#x27;avg&#x27;]\\n    if (dir == &#x27;from the Loop&#x27;) {\\n        var ratios = avg_data[&#x27;ratio_from&#x27;]\\n    } else {\\n        var ratios = avg_data[&#x27;ratio_to&#x27;]\\n    }\\n    sum = ratios.reduce((a, b) =&gt; a + b, 0)\\n\\n    x = data[&#x27;x&#x27;]\\n    total = data[&#x27;total&#x27;]\\n    N = data[&#x27;N&#x27;]\\n    W = data[&#x27;W&#x27;]\\n    S = data[&#x27;S&#x27;]\\n    L = data[&#x27;L&#x27;]\\n\\n    for (i = 0; i &lt; x.length; i++) {\\n        N[i] = 0\\n        W[i] = 0\\n        S[i] = 0\\n        L[i] = 0\\n        for (j = 0; j &lt; regions.length; j++) {\\n            if (regions[j] == &#x27;N&#x27;) {\\n                N[i] += ratios[j] * (1 - elas * x[i] / avgs[j])\\n            } else if (regions[j] == &#x27;W&#x27;) {\\n                W[i] += ratios[j] * (1 - elas * x[i] / avgs[j])\\n            } else if (regions[j] == &#x27;S&#x27;) {\\n                S[i] += ratios[j] * (1 - elas * x[i] / avgs[j])\\n            } else {\\n                L[i] += ratios[j]\\n            }\\n        }\\n        N[i] = N[i] / sum\\n        W[i] = W[i] / sum\\n        S[i] = S[i] / sum\\n        L[i] = L[i] / sum\\n        total[i] = N[i] + W[i] + S[i] + L[i]\\n    }\\n    source.change.emit()\\n"},"id":"7cbeefbb-600f-40f5-a87d-9807bfebe17c","type":"CustomJS"},{"attributes":{"callback":null,"column_names":["census_tract","avg","std","region","ratio_from","ratio_to","index"],"data":{"avg":{"__ndarray__":"u4ZrhvOlJkBTpQX8MLEjQCZmMQHcQiFAcMJ7WESYIUBTXlmQB5MgQCzaHtJUoiFAltD7It7+HUC5lefOksAeQEPLRYjCcR5AvcefeQQUIEDE2RKnpbUeQCm1CpHnoRxA7RNUilKgHUAEY7XZix4aQO6XVlmQ+xlAdsqYJZzHGEBs4KDQroIYQJ40qnU4gBpAeZU+4CK1IEDygah8VY8YQERCaOIapBhAtwH4NjoaF0Cwrzng1+cVQGjwSHQsqBhAVQFr8r7mIEDlVlsQYWcdQMrzzmod4BxAusXzRmOZJEAh9h2hhBAYQFkYa8aFYBZAXeU8LCPZIkD2FMel1DccQIRz5C+0yiJA1+plsryHIEDkJVcngtpDQCQheT72ZjxA","dtype":"float64","shape":[36]},"census_tract":["17031071400","17031071500","17031080100","17031080201","17031080202","17031080300","17031081000","17031081100","17031081201","17031081202","17031081300","17031081401","17031081402","17031081403","17031081500","17031081600","17031081700","17031081800","17031243500","17031280100","17031281900","17031320100","17031320400","17031320600","17031330100","17031833000","17031833100","17031838100","17031839000","17031839100","17031841000","17031841900","17031842200","17031842300","17031980000","17031980100"],"index":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35],"ratio_from":{"__ndarray__":"RhM0JxF1dD/r8LRZ5raDP0cF/yKl4nw/sM8fkWjyZT/gWdCePSx1PxvD61eoBnw/tcLKdTrDgT+e6xDx5L58PytgVgXRaaE/2RjYAybSgD94/2/61u6YPwSWv/Dl5qA/giEsC50tkj/N4hRVqJOmP6yglBnSX6s/JjL/atXQlz+p3G30zdyqP+AzTEPiYaQ/hSFnmLqZaD9rVGs6NzqiP+NFF68nlK8/3KoeCd1wsz8hRCpJcOebP3l/JBPRbJE/cg3hICmqoj91gOuiTbWWPw5XcMAhdIg/FO5SdPQrbj8NUp+up/5+P6Y8VGTWYsI/qTBCMlz7hT+05WcShTGDP3K/FoOibHg/bCg0z8+0cj8pynwmYaumP21Xpu2kLI8/","dtype":"float64","shape":[36]},"ratio_to":{"__ndarray__":"drxDlUzhbD/FCititlyAP8igDsJpm34/Ns/S21hrZT8Z53JZXrB4P4nkHiUbBXk/qRt8b/29gz9BdZRb+zeCP9sXm5QXP6I/reENgBQ8gj98m7j4EnCdP6gm2sUGEaA/2z03FKWOkz8qP7Qk8jqnP+VeIazx/bI/fpeJknfVmz9ULjhAoB6tP0+cFLUfVaI/7GDUjDaPWD9imbpszRujPwxTSEi8jLA/qameTCZbuD8e3HGhidGdP40wFySVTZE/2i4vQTBUmz+h89PViUWGPyG+NUsRQX4/SQvnoUDTUD9q556wsypwP+xst8HDscM/Fwf5wahtgj9ypNQH9aluPx5NZPiis3M/qakHxm+IYT+aG8nODferPxXfxqpAc5A/","dtype":"float64","shape":[36]},"region":["N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","W","W","W","L","L","L","S","W","W","W","L","L","S","W","N","W","W","S"],"std":{"__ndarray__":"SkK5ZEnk/D/jJvngdmD5P3DtPJZYzvY/1VTc2dPn9D9OA5s/2vT0P6S/gkQ+vvc/qvPJBqmC9D/KzQ3vD7z0PzCnq4AWnPY/HUz2T3go9z82aLjUixX4P1bn8GhDbfY/VC2DTTWj9z9CkUMMyPj1P1k1Vcd50fU/W0/srcQC9D/I9l4FZIbzPynatVt5KvU/5YVuUQqg+T/ilPRUvNXyP49xQRh0HPQ/IGhHzpjt+T/aFaBBBYf4P3iks7CE9/w/V4FuZT6K/z8+r6EgpP72P1p8taRdbPc/UWZwGDfY/j/v5duDiEr4P1C6eMeZePc/WFx/YKor/j/7CvM7gvD7P0SmCslOWf8/CZu6LCInAkDEcd9uJqkVQIsxLv815g5A","dtype":"float64","shape":[36]}}},"id":"4dbefd45-27c6-465f-9257-fdc394796eb5","type":"ColumnDataSource"},{"attributes":{"label":{"value":"Total"},"renderers":[{"id":"947473bf-829d-4f50-8929-9b6b1607de00","type":"GlyphRenderer"}]},"id":"8d535c65-3dd3-49b1-a9a1-419d96848ed3","type":"LegendItem"},{"attributes":{},"id":"3009313b-64c4-4c7c-8788-08f1a671fdd2","type":"PanTool"},{"attributes":{"callback":null,"end":5},"id":"3f073f51-5725-41f4-8dc0-c2b6513cdc86","type":"Range1d"},{"attributes":{"children":[{"id":"55f9740e-00ad-4d67-82b0-e0fce9ddb564","type":"Select"},{"id":"d4dd3cda-7cc4-4e42-b201-f79bdc43193f","type":"Slider"}]},"id":"a1135b86-781d-4bf9-af2a-5040361b8451","type":"WidgetBox"},{"attributes":{"callback":null,"end":1.0,"js_property_callbacks":{"change:value":[{"id":"06ace210-1041-45cb-9ab3-79841663b988","type":"CustomJS"}]},"start":0.0,"step":0.1,"title":"price elasticity (absolute value)","value":0.5},"id":"d4dd3cda-7cc4-4e42-b201-f79bdc43193f","type":"Slider"},{"attributes":{"line_alpha":0.1,"line_color":"#1f77b4","line_width":2,"x":{"field":"x"},"y":{"field":"N"}},"id":"2c4441b2-ce52-440c-953c-9a3a95a1b50a","type":"Line"}],"root_ids":["a580f36f-89a9-4cdc-a3ac-78f3fd2d01f4"]},"title":"Bokeh Application","version":"0.12.13"}}';
          var render_items = [{"docid":"d67cd5b0-2f59-46ec-9d20-7fd6f9e2e76b","elementid":"6d2e575c-8843-4c82-b3e2-d7db9a3b4244","modelid":"a580f36f-89a9-4cdc-a3ac-78f3fd2d01f4"}];
          root.Bokeh.embed.embed_items(docs_json, render_items);
        
          }
          if (root.Bokeh !== undefined) {
            embed_document(root);
          } else {
            var attempts = 0;
            var timer = setInterval(function(root) {
              if (root.Bokeh !== undefined) {
                embed_document(root);
                clearInterval(timer);
              }
              attempts++;
              if (attempts > 100) {
                console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing")
                clearInterval(timer);
              }
            }, 10, root)
          }
        })(window);
      });
    };
    if (document.readyState != "loading") fn();
    else document.addEventListener("DOMContentLoaded", fn);
  })();
